<!-- table/templates/table/table_form.html -->
{% extends 'table_template.html' %}

{% block title %}{% if table %}ویرایش میز{% else %}ایجاد میز جدید{% endif %}{% endblock %}
{% block page_title %}{% if table %}ویرایش میز {{ table.table_number }}{% else %}ایجاد میز جدید{% endif %}{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="bg-white rounded-lg shadow-md p-6">
        <form method="post">
            {% csrf_token %}

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- شماره میز -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">شماره میز *</label>
                    <input type="text" name="table_number" value="{{ table.table_number|default:'' }}"
                           class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                           required placeholder="مثال: A1">
                </div>

                <!-- نوع میز -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">نوع میز *</label>
                    <select name="table_type" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        <option value="">انتخاب کنید</option>
                        {% for type_value, type_name in table_types %}
                        <option value="{{ type_value }}" {% if table.table_type == type_value %}selected{% endif %}>{{ type_name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <!-- ظرفیت -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ظرفیت (تعداد نفر) *</label>
                    <input type="number" name="capacity" value="{{ table.capacity|default:'2' }}" min="1" max="50"
                           class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                           required>
                </div>

                <!-- حداقل زمان رزرو -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">حداقل زمان رزرو (دقیقه)</label>
                    <input type="number" name="min_reservation_duration" value="{{ table.min_reservation_duration|default:'60' }}" min="30"
                           class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>

            <!-- توضیحات -->
            <div class="mt-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">توضیحات</label>
                <textarea name="description" rows="3"
                          class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                          placeholder="توضیحات اختیاری درباره میز">{{ table.description|default:'' }}</textarea>
            </div>

            <!-- وضعیت فعال -->
            <div class="mt-6 flex items-center">
                <input type="checkbox" name="is_active" id="is_active"
                       class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                       {% if table.is_active or not table %}checked{% endif %}>
                <label for="is_active" class="mr-2 text-sm text-gray-700">میز فعال است</label>
            </div>

            <!-- دکمه‌ها -->
            <div class="mt-8 flex justify-end space-x-3 space-x-reverse">
                <a href="{% url 'table:table_list' %}" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition duration-200">
                    انصراف
                </a>
                <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg flex items-center transition duration-200">
                    <i class="fas fa-save ml-2"></i>
                    {% if table %}ذخیره تغییرات{% else %}ایجاد میز{% endif %}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}